#!/bin/bash

if ! command -v aerospace >/dev/null 2>&1; then
  echo "Aerospace installation not found"
  exit 1
fi

WORKSPACE=$1
OPEN_CMD=$2

NUM_WINDOWS=$(aerospace list-windows --workspace $WORKSPACE --count)
if [ "$NUM_WINDOWS" = "0" ]; then
  aerospace summon-workspace $WORKSPACE
  eval "$OPEN_CMD"
else
  aerospace summon-workspace $WORKSPACE
fi
